# Resilio Sync Windows 安装指南

## 1. 下载和安装

### 下载客户端
- 官方下载页面: https://www.resilio.com/individuals/
- 点击 **Download Resilio Sync Home Free** 下载 Windows 版本
- 或直接下载: https://download-cdn.resilio.com/stable/windows64/Resilio-Sync_x64.exe

### 安装步骤
1. 运行下载的 `.exe` 安装程序
2. 按默认选项安装（会自动启动并添加到系统托盘）
3. 首次启动会打开浏览器到 `http://127.0.0.1:8888`

## 2. 配置同步文件夹

### 添加树莓派的同步文件夹

1. **在树莓派端获取密钥**
   - SSH 登录树莓派或在浏览器打开 `http://192.168.1.100:8888`
   - 点击「添加文件夹」
   - 选择路径: `/home/pi/LifeCoach/recordings`
   - 点击「生成密钥」，会得到一个类似这样的密钥：
     ```
     BKGHBWXVHGLWXWGKLHCQXTVYGGCCHRFBZ
     ```
   - 复制此密钥

2. **在 Windows 端添加文件夹**
   - 打开 Resilio Sync (浏览器或系统托盘图标)
   - 点击左上角「+」或「输入密钥或链接」
   - 粘贴刚才复制的密钥
   - 选择本地保存路径（如 `D:\LifeCoach-Recordings`）
   - 点击「连接」

3. **等待同步**
   - 两台设备会自动连接（局域网内几秒钟）
   - 开始同步文件，可以看到实时进度

## 3. 多设备同步

### 添加更多设备

**在笔记本/其他电脑上**：
1. 安装 Resilio Sync（同上）
2. 使用同一个密钥添加文件夹
3. 选择本地路径
4. 自动与所有设备同步

**在手机上**（可选）：
- Android: Google Play 搜索 "Resilio Sync"
- iOS: App Store 搜索 "Resilio Sync"
- 打开 App，扫描密钥二维码或手动输入

## 4. 高级配置

### 设置为只读（备份模式）

如果你希望某台设备只用于备份，不希望它修改文件：
1. 在树莓派端生成密钥时，选择「只读密钥」
2. 其他设备使用只读密钥连接，只能下载不能上传

### 选择性同步

不想同步所有文件：
1. 右键点击同步文件夹 → 「首选项」
2. 「忽略列表」中添加规则，例如：
   ```
   *.tmp
   .DS_Store
   ```

### 版本历史

防止误删除：
1. 文件夹「首选项」→「存档」
2. 启用「将已删除文件保存在存档中」
3. 设置保留天数（如 30 天）

## 5. 网络优化

### 局域网加速
- 确保两台设备在同一 WiFi 下
- Resilio 会自动使用局域网直连（速度最快）

### 外网同步
- 树莓派连接到互联网（手机热点/公共 WiFi）
- 会自动尝试 NAT 穿透建立 P2P 连接
- 如果无法直连，通过加密中继服务器转发

### 端口转发（可选，提升外网速度）
如果路由器支持：
1. 登录路由器管理界面
2. 添加端口转发规则：
   - 外部端口: 55555
   - 内部 IP: 192.168.1.100
   - 内部端口: 55555
   - 协议: TCP+UDP

## 6. 常见问题

### 设备连接不上？
- 检查两边 Resilio Sync 是否都在运行
- 检查防火墙是否阻止（Windows 防火墙可能需要允许）
- 等待几分钟，设备发现需要时间

### 同步速度慢？
- 局域网内应该很快（100MB/s+），如果慢检查 WiFi 信号
- 外网受限于上传带宽（通常 1-5MB/s）

### 文件冲突？
- 如果两台设备同时修改同一文件，Resilio 会保留两个版本
- 文件名会添加后缀如 `.conflict.2026-01-23`

### 占用存储空间？
- 每台设备都保存完整文件副本（不是云盘模式）
- 确保本地硬盘空间足够

## 7. 卸载（如需要）

### Windows
- 控制面板 → 程序和功能 → 卸载 Resilio Sync
- 或使用 Windows 设置 → 应用 → 搜索 Resilio

### 树莓派
```bash
sudo systemctl stop resilio-sync
sudo systemctl disable resilio-sync
sudo rm /etc/systemd/system/resilio-sync.service
rm -rf ~/.resilio-sync
```

## 总结

✅ **优点**：
- P2P 直连，局域网极快
- 多设备自动同步
- 不依赖云存储
- 端到端加密

⚠️ **注意**：
- 免费版限制 10 个同步文件夹（够用）
- 需要至少一台设备在线才能同步
- 每台设备占用存储空间（不是云盘压缩）
